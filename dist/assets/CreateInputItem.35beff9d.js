import{z as L,A as $,d as j,B as O,C as A,D as U,f as d,E as T,h as V,G as q,_ as G,o as H,b as F,a as u,r as k,p as J,g as K}from"./index.2c36561e.js";import{u as Q,e as f,c as R,p as W,a as X,m as w,n as x,b as Y,d as B,I as Z,L as ee,i as te,f as oe,w as ne,g as se}from"./index.373f2ad2.js";function ae(){const e=$({show:!1}),t=s=>{e.show=s},o=s=>{f(e,s,{transitionAppear:!0}),t(!0)},c=()=>t(!1);return Q({open:o,close:c,toggle:t}),{open:o,close:c,state:e,toggle:t}}function ie(e){const t=L(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}let m=0;function le(e){e?(m||document.body.classList.add("van-toast--unclickable"),m++):m&&(m--,m||document.body.classList.remove("van-toast--unclickable"))}const[ce,v]=R("toast"),re=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],de={icon:String,show:Boolean,type:w("text"),overlay:Boolean,message:x,iconSize:x,duration:Y(2e3),position:w("middle"),teleport:[String,Object],className:B,iconPrefix:String,transition:w("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:B,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var M=j({name:ce,props:de,emits:["update:show"],setup(e,{emit:t}){let o,c=!1;const s=()=>{const i=e.show&&e.forbidClick;c!==i&&(c=i,le(c))},p=i=>t("update:show",i),C=()=>{e.closeOnClick&&p(!1)},g=()=>clearTimeout(o),b=()=>{const{icon:i,type:l,iconSize:P,iconPrefix:D,loadingType:E}=e;if(i||l==="success"||l==="fail")return d(Z,{name:i||l,size:P,class:v("icon"),classPrefix:D},null);if(l==="loading")return d(ee,{class:v("loading"),size:P,type:E},null)},r=()=>{const{type:i,message:l}=e;if(te(l)&&l!=="")return i==="html"?d("div",{key:0,class:v("text"),innerHTML:String(l)},null):d("div",{class:v("text")},[l])};return O(()=>[e.show,e.forbidClick],s),O(()=>[e.show,e.type,e.message,e.duration],()=>{g(),e.show&&e.duration>0&&(o=setTimeout(()=>{p(!1)},e.duration))}),A(s),U(s),()=>d(X,T({class:[v([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:C,onClosed:g,"onUpdate:show":p},W(e,re)),{default:()=>[b(),r()]})}});const N={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let n=[],_=!1,h=f({},N);const y=new Map;function z(e){return se(e)?e:{message:e}}function ue(){const{instance:e,unmount:t}=ie({setup(){const o=V(""),{open:c,state:s,close:p,toggle:C}=ae(),g=()=>{_&&(n=n.filter(r=>r!==e),t())},b=()=>d(M,T(s,{onClosed:g,"onUpdate:show":C}),null);return O(o,r=>{s.message=r}),q().render=b,{open:c,clear:p,message:o}}});return e}function fe(){if(!n.length||_){const e=ue();n.push(e)}return n[n.length-1]}function a(e={}){if(!oe)return{};const t=fe(),o=z(e);return t.open(f({},h,y.get(o.type||h.type),o)),t}const S=e=>t=>a(f({type:e},z(t)));a.loading=S("loading");a.success=S("success");a.fail=S("fail");a.clear=e=>{var t;n.length&&(e?(n.forEach(o=>{o.clear()}),n=[]):_?(t=n.shift())==null||t.clear():n[0].clear())};function pe(e,t){typeof e=="string"?y.set(e,t):f(h,e)}a.setDefaultOptions=pe;a.resetDefaultOptions=e=>{typeof e=="string"?y.delete(e):(h=f({},N),y.clear())};a.allowMultiple=(e=!0)=>{_=e};a.install=e=>{e.use(ne(M)),e.config.globalProperties.$toast=a};const me={},I=e=>(J("data-v-b1d1db55"),e=e(),K(),e),ve={class:"item"},ge={class:"icon"},he=I(()=>u("i",{class:"iconfont icon-set"},null,-1)),ye={class:"info"},_e=I(()=>u("i",{class:"iconfont icon-set"},null,-1)),Ce={class:"text"},be=I(()=>u("div",null,"111",-1));function ke(e,t){return H(),F("div",ve,[u("div",ge,[k(e.$slots,"icon",{},()=>[he],!0)]),u("div",ye,[k(e.$slots,"info",{},()=>[_e],!0)]),u("div",Ce,[k(e.$slots,"text",{},()=>[be],!0)])])}const Ie=G(me,[["render",ke],["__scopeId","data-v-b1d1db55"]]);export{Ie as C,a as T};
